<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE muclient>
<!-- Saved on Saturday, January 24, 2015, 12:30 PM -->
<!-- MuClient version 4.73 -->

<!-- Plugin "RentReckoner" generated by Plugin Wizard -->

<muclient>
<plugin
   name="RentReckoner"
   author="Kloke"
   id="f66034d1776a85b84320aca4"
   language="Lua"
   purpose="Work out how many month's rent is in the bank"
   date_written="2015-01-24 12:27:38"
   requires="1.00"
   version="1.1"
   >
<description trim="y">
<![CDATA[
Work out how many month's rent is in the bank
Rent comes out every 9 RW days, or 27 Disc days

You have 19335Rh 118s in your account.
Rent excess is 18526Rh, which is enough for 23.90 Disc, or 7.07 months rent.

]]>
</description>

</plugin>

<!--  Triggers  -->

<triggers>
  <trigger
   enabled="y"
   match="*This gives a total of *Rh*in your account*"
   send_to="12"
   sequence="100"
  >
  <send>local bankBalance = tonumber(%2)
	CWCBuffaloRent = 1700
	AMCheesemongersRent = 459
	OneMonthRent = CWCBuffaloRent + AMCheesemongersRent
	ThreeMonthRent = OneMonthRent * 3
local Excess = (bankBalance - OneMonthRent)
local DWMonthsRent = (bankBalance / OneMonthRent)
local RWMonthsRent = ((DWMonthsRent*9)/365)*12
if (Excess &lt; 0) then
   ColourNote ("red", "black", "You need " .. -Excess .. "Rh more to meet rent")
else
   ColourNote ("green", "black", "Rent excess is " ..  Excess .. "Rh" .. ", which is enough for " .. string.format ("%.2f", DWMonthsRent) .. " Disc, or " .. string.format ("%.2f", RWMonthsRent) .. " months rent.")
end -- if</send>
  </trigger>
  <trigger
   enabled="y"
   match="*You have *Rh*in your account*"
   send_to="12"
   sequence="100"
  >
  <send>local bankBalance = tonumber(%2)
	CWCBuffaloRent = 1700 -- was 2197 for Buffalo
	AMCheesemongersRent = 459
	OneMonthRent = CWCBuffaloRent + AMCheesemongersRent
	ThreeMonthRent = OneMonthRent * 3
local Excess = (bankBalance - OneMonthRent)
local DWMonthsRent = (bankBalance / OneMonthRent)
local RWMonthsRent = ((DWMonthsRent*9)/365)*12
if (Excess &lt; 0) then
   ColourNote ("red", "black", "You need " .. -Excess .. "Rh more to meet rent")
else
   ColourNote ("green", "black", "Rent excess is " ..  Excess .. "Rh" .. ", which is enough for " .. string.format ("%.2f", DWMonthsRent) .. " Disc, or " .. string.format ("%.2f", RWMonthsRent) .. " months rent.")
end -- if</send>
  </trigger>
</triggers>

<!--  Variables  -->

<variables>
  <variable name="OneMonthRent">809</variable>
  <variable name="ThreeMonthRent">2427</variable>
  <variable name="DWMonthsRent">1</variable>
  <variable name="RWMonthsRent">1</variable>
  <variable name="Excess">1</variable>
  
</variables>

<!--  Plugin help  -->

<aliases>
  <alias
   script="OnHelp"
   match="RentReckoner:help"
   enabled="y"
  >
  </alias>
</aliases>

<script>
<![CDATA[
function OnHelp ()
  world.Note (world.GetPluginInfo (world.GetPluginID (), 3))
end
]]>
</script> 

</muclient>
